# encoding: utf-8
module Icq
  module OSCAR
    module Location
      # IChat_Cap = "\x09\x46\x13\x44\x4c\x7f\x11\xd1\x82\x22\x44\x45\x53\x54\x00\x00"
      ICQ_Relay_Cap = 
        "\x09\x46\x13\x49\x4C\x7F\x11\xD1\x82\x22\x44\x45\x53\x54\x00\x00"

      # ICQ_Cap = "\x09\x46\x13\x44\x4C\x7F\x11\xD1\x82\x22\x44\x45\x53\x54\x00\x00"

      XStatuses = [
        "\x63\x62\x73\x37\xa0\x3f\x49\xff\x80\xe5\xf7\x09\xcd\xe0\xa4\xee", # shopping
        "\x5a\x58\x1e\xa1\xe5\x80\x43\x0c\xa0\x6f\x61\x22\x98\xb7\xe4\xc7", # duck
        "\x83\xC9\xB7\x8E\x77\xE7\x43\x78\xB2\xC5\xFB\x6C\xFC\xC3\x5B\xEC", # tired
        "\xE6\x01\xE4\x1C\x33\x73\x4B\xD1\xBC\x06\x81\x1D\x6C\x32\x3D\x81", # party
        "\x8C\x50\xDB\xAE\x81\xED\x47\x86\xAC\xCA\x16\xCC\x32\x13\xC7\xB7", # beer
        "\x3F\xB0\xBD\x36\xAF\x3B\x4A\x60\x9E\xEF\xCF\x19\x0F\x6A\x5A\x7F", # thinking
        "\xF8\xE8\xD7\xB2\x82\xC4\x41\x42\x90\xF8\x10\xC6\xCE\x0A\x89\xA6", # eating
        "\x80\x53\x7D\xE2\xA4\x67\x4A\x76\xB3\x54\x6D\xFD\x07\x5F\x5E\xC6", # tv
        "\xF1\x8A\xB5\x2E\xDC\x57\x49\x1D\x99\xDC\x64\x44\x50\x24\x57\xAF", # friends
        "\x1B\x78\xAE\x31\xFA\x0B\x4D\x38\x93\xD1\x99\x7E\xEE\xAF\xB2\x18", # coffee
        "\x61\xBE\xE0\xDD\x8B\xDD\x47\x5D\x8D\xEE\x5F\x4B\xAA\xCF\x19\xA7", # music
        "\x48\x8E\x14\x89\x8A\xCA\x4A\x08\x82\xAA\x77\xCE\x7A\x16\x52\x08", # bussiness
        "\x10\x7A\x9A\x18\x12\x32\x4D\xA4\xB6\xCD\x08\x79\xDB\x78\x0F\x09", # camera
        "\x6F\x49\x30\x98\x4F\x7C\x4A\xFF\xA2\x76\x34\xA0\x3B\xCE\xAE\xA7", # funny
        "\x12\x92\xE5\x50\x1B\x64\x4F\x66\xB2\x06\xB2\x9A\xF3\x78\xE4\x8D", # phone
        "\xD4\xA6\x11\xD0\x8F\x01\x4E\xC0\x92\x23\xC5\xB6\xBE\xC6\xCC\xF0", # games
        "\x60\x9D\x52\xF8\xA2\x9A\x49\xA6\xB2\xA0\x25\x24\xC5\xE9\xD2\x60", # college
        "\x1F\x7A\x40\x71\xBF\x3B\x4E\x60\xBC\x32\x4C\x57\x87\xB0\x4C\xF1", # sick
        "\x78\x5E\x8C\x48\x40\xD3\x4C\x65\x88\x6F\x04\xCF\x3F\x3F\x43\xDF", # sleeping
        "\xA6\xED\x55\x7E\x6B\xF7\x44\xD4\xA5\xD4\xD2\xE7\xD9\x5C\xE8\x1F", # surfing
        "\x12\xD0\x7E\x3E\xF8\x85\x48\x9E\x8E\x97\xA7\x2A\x65\x51\xE5\x8D", # internet
        "\xBA\x74\xDB\x3E\x9E\x24\x43\x4B\x87\xB6\x2F\x6B\x8D\xFE\xE5\x0F", # engineering
        "\x63\x4F\x6B\xD8\xAD\xD2\x4A\xA1\xAA\xB9\x11\x5B\xC2\x6D\x05\xA1", # typing
        "\x01\xD8\xD7\xEE\xAC\x3B\x49\x2A\xA5\x8D\xD3\xD8\x77\xE6\x6B\x92", # angry
        "\x2C\xE0\xE4\xE5\x7C\x64\x43\x70\x9C\x3A\x7A\x1C\xE8\x78\xA7\xDC", # unk
        "\x10\x11\x17\xC9\xA3\xB0\x40\xF9\x81\xAC\x49\xE1\x59\xFB\xD5\xD4", # ppc
        "\x16\x0C\x60\xBB\xDD\x44\x43\xF3\x91\x40\x05\x0F\x00\xE6\xC0\x09", # mobile
        "\x64\x43\xC6\xAF\x22\x60\x45\x17\xB5\x8C\xD7\xDF\x8E\x29\x03\x52", # man
        "\x16\xF5\xB7\x6F\xA9\xD2\x40\x35\x8C\xC5\xC0\x84\x70\x3C\x98\xFA", # wc
        "\x63\x14\x36\xFF\x3F\x8A\x40\xD0\xA5\xCB\x7B\x66\xE0\x51\xB3\x64", # question
        "\xB7\x08\x67\xF5\x38\x25\x43\x27\xA1\xFF\xCF\x4C\xC1\x93\x97\x97", # way
        "\xDD\xCF\x0E\xA9\x71\x95\x40\x48\xA9\xC6\x41\x32\x06\xD6\xF2\x80", # heart
        "\x3F\xB0\xBD\x36\xAF\x3B\x4A\x60\x9E\xEF\xCF\x19\x0F\x6A\x5A\x7E", # cigarette
        "\xE6\x01\xE4\x1C\x33\x73\x4B\xD1\xBC\x06\x81\x1D\x6C\x32\x3D\x82", # sex
        "\xD4\xE2\xB0\xBA\x33\x4E\x4F\xA5\x98\xD0\x11\x7D\xBF\x4D\x3C\xC8", # search
        "\x00\x72\xD9\x08\x4A\xD1\x43\xDD\x91\x99\x6F\x02\x69\x66\x02\x6F"  # diary
      ]

      def set_xstatus arg
        caps = ''
        if arg.nil? or arg == -1
        else
          caps << ICQ_Relay_Cap.force_encoding('ascii-8bit')
          caps << XStatuses[arg].force_encoding('ascii-8bit')
        end

        tlvs = pack_tlv(0x05, caps)
        send_snac 0x0002, 0x0004, tlvs
        caps
      end

      XStatuses_Names = [ 'shopping', 'duck', 'tired', 'party', 'beer',
        'thinking', 'eating', 'tv', 'friends', 'coffee', 'music', 'buisness',
        'camera', 'funny', 'phone', 'games', 'college', 'sick',
        'sleeping', 'surfing', 'internet', 'engineering', 'typing',
        'angery', 'unk', 'ppc', 'mobile', 'man', 'wc', 'question',
        'way', 'heart', 'cigarette', 'sex', 'search', 'diary']

      XStatus_Names_Ru = [
        "думаю", "ем", "тв", "друзья", "кофе", "музыка", "бизнес",
        "камера", "весело", "телефон", "игры", "коледж", "болен",
        "cплю", "сёрфинг", "интернет", "инженеринг", "печатаю",
        "зол", "unk", "ppc", "мобила", "человек", "сортир",
        "вопрос", "дорога", "сердце", "сигарета",
        "секс", "поиск", "будни" ]


        def set_away message
          data = pack_tlv(0x03, 'text/aolrtf; charset="us-ascii"')
          data << pack_tlv(0x04, message)
          send_snac 0x02, 0x04, data
        end
    end
  end
end
